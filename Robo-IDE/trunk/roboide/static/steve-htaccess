RewriteEngine On
RewriteBase /~stephen/
AuthType Basic
AuthName "Testing login"
AuthBasicProvider file
AuthUserFile /home/stephen/passwords
Require valid-user

#OK, Crazyness approaches
#First, REMOTE_USER not available at this stage so do a URL-based look ahead to
#find the REMOTE_USER header for this. This appears to make it available in %1
RewriteCond %{LA-U:REMOTE_USER} (.+)
#Then make %1 available as a environment variable RU
RewriteRule . - [E=RU:%1]
#Finally add that as a http header X-Forwarded-User
RequestHeader add X-Forwarded-User %{RU}e

RewriteRule ^ide/static/(.*)$ $1
RewriteRule ^ide/$  index.html
RewriteRule ^ide/(.*)$ http://127.0.0.1:8088/$1 [proxy]
